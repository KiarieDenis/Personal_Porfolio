<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ title }} | Denis Kiarie</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link
        href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;700&family=Space+Grotesk:wght@300;400;600;700&display=swap"
        rel="stylesheet">
</head>

<body>

    <div class="container">
        <nav class="navbar">
            <a href="/" class="logo">Kiarie<span>.</span></a>
            <ul class="nav-links">
                <li><a href="{{ url_for('home') }}" class="{{ 'active' if request.path == '/' else '' }}">About Me</a>
                </li>
                <li><a href="{{ url_for('portfolio') }}"
                        class="active' if request.path == '/portfolio' else '' }}">Portfolio</a></li>
                <li><a href="{{ url_for('projects') }}"
                        class="{{ 'active' if request.path == '/projects' else '' }}">Projects</a></li>
            </ul>
        </nav>

        {% block content %}{% endblock %}

        <footer>
            <div style="margin-bottom: 1rem; display: flex; justify-content: center; gap: 2rem;">
                <a href="https://www.linkedin.com/in/denis-kiarie-6608592b3" target="_blank"
                    style="color: var(--text-secondary); font-weight: 600; display: flex; align-items: center; gap: 0.5rem;">
                    LinkedIn <span style="color: var(--accent-yellow);">-></span>
                </a>
                <a href="mailto:kangethedennis34@gmail.com"
                    style="color: var(--text-secondary); font-weight: 600; display: flex; align-items: center; gap: 0.5rem;">
                    Email <span style="color: var(--accent-yellow);">-></span>
                </a>
            </div>
            <p>&copy; 2026 Denis Kiarie. All Rights Reserved. Built with Systems Thinking.</p>
        </footer>
    </div>

    <!-- Image Modal -->
    <div id="imageModal"
        style="display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%; overflow: auto; background-color: rgba(0,0,0,0.9); justify-content: center; align-items: center;">
        <span class="close-modal"
            style="position: absolute; top: 15px; right: 35px; color: #f1f1f1; font-size: 40px; font-weight: bold; cursor: pointer;">&times;</span>
        <img class="modal-content" id="modalImg"
            style="margin: auto; display: block; max-width: 90%; max-height: 90vh; border-radius: 8px;">
        <div id="caption"
            style="margin: auto; display: block; width: 80%; max-width: 700px; text-align: center; color: #ccc; padding: 10px 0; height: 150px;">
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Animation Observer
            const observerOptions = {
                threshold: 0.1,
                rootMargin: "0px 0px -50px 0px"
            };

            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('animate-active');
                        observer.unobserve(entry.target); // Run once
                    }
                });
            }, observerOptions);

            document.querySelectorAll('.rush-in-left, .rush-in-right').forEach(el => {
                observer.observe(el);
            });

            // Modal Logic
            const modal = document.getElementById("imageModal");
            const modalImg = document.getElementById("modalImg");
            const captionText = document.getElementById("caption");
            const closeBtn = document.getElementsByClassName("close-modal")[0];

            document.querySelectorAll('.view-cert-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    e.preventDefault();
                    modal.style.display = "flex";
                    modalImg.src = btn.getAttribute('data-src');
                    captionText.innerHTML = btn.getAttribute('data-caption');
                });
            });

            closeBtn.onclick = function () {
                modal.style.display = "none";
            }

            modal.onclick = function (e) {
                if (e.target === modal) {
                    modal.style.display = "none";
                }
            }
        });
    </script>
</body>

</html>